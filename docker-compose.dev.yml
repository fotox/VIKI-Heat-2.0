
services:
  backend:
    build:
      target: development
    environment:
      - FLASK_ENV=development
      - FLASK_DEBUG=1
      - LOG_LEVEL=DEBUG
    volumes:
      # Hot-reload für lokale Entwicklung
      - ./function/backend:/app
      - /app/.venv  # Exclude venv from mount
    ports:
      - "5000:5000"
      - "5678:5678"  # Debugger Port
    command: python app.py

  # Adminer für Database Management
  adminer:
    image: adminer:latest
    container_name: viki-adminer
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      - ADMINER_DEFAULT_SERVER=db
      - ADMINER_DESIGN=nette
    depends_on:
      - db
    networks:
      - viki-network

  # Redis Commander für Redis Management
  redis-commander:
    image: rediscommander/redis-commander:latest
    container_name: viki-redis-commander
    restart: unless-stopped
    environment:
      - REDIS_HOSTS=local:redis:6379
    ports:
      - "8081:8081"
    depends_on:
      - redis
    networks:
      - viki-network
      